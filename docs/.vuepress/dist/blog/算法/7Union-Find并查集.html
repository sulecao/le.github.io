<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Union-Find并查集 | 曹乐乐的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="曹乐乐的博客">
    
    <link rel="preload" href="/assets/css/0.styles.5f17164d.css" as="style"><link rel="preload" href="/assets/js/app.fdf1d93e.js" as="script"><link rel="preload" href="/assets/js/2.07a58c5b.js" as="script"><link rel="preload" href="/assets/js/9.2c3ca298.js" as="script"><link rel="prefetch" href="/assets/js/10.4150cfd4.js"><link rel="prefetch" href="/assets/js/11.6765a058.js"><link rel="prefetch" href="/assets/js/12.13ff42eb.js"><link rel="prefetch" href="/assets/js/13.6ce5732c.js"><link rel="prefetch" href="/assets/js/14.070af781.js"><link rel="prefetch" href="/assets/js/15.23bba5f9.js"><link rel="prefetch" href="/assets/js/16.dc60a072.js"><link rel="prefetch" href="/assets/js/17.670ce392.js"><link rel="prefetch" href="/assets/js/18.31df696f.js"><link rel="prefetch" href="/assets/js/19.0afd4116.js"><link rel="prefetch" href="/assets/js/20.4c748499.js"><link rel="prefetch" href="/assets/js/21.3aa4b0bf.js"><link rel="prefetch" href="/assets/js/22.de10d1ac.js"><link rel="prefetch" href="/assets/js/23.f15ae632.js"><link rel="prefetch" href="/assets/js/24.086120e5.js"><link rel="prefetch" href="/assets/js/25.d9758788.js"><link rel="prefetch" href="/assets/js/26.4cf5343b.js"><link rel="prefetch" href="/assets/js/27.8c626774.js"><link rel="prefetch" href="/assets/js/28.1334e3f2.js"><link rel="prefetch" href="/assets/js/29.f0f86908.js"><link rel="prefetch" href="/assets/js/3.63acc60a.js"><link rel="prefetch" href="/assets/js/30.ccb08c8f.js"><link rel="prefetch" href="/assets/js/31.15a648d6.js"><link rel="prefetch" href="/assets/js/32.d22ae5f4.js"><link rel="prefetch" href="/assets/js/33.da1f97ee.js"><link rel="prefetch" href="/assets/js/34.ed44f4a3.js"><link rel="prefetch" href="/assets/js/35.24064e1d.js"><link rel="prefetch" href="/assets/js/36.dbd7d03f.js"><link rel="prefetch" href="/assets/js/37.e2a4ac65.js"><link rel="prefetch" href="/assets/js/38.6a9661f9.js"><link rel="prefetch" href="/assets/js/39.1fdb657d.js"><link rel="prefetch" href="/assets/js/4.13d9dc14.js"><link rel="prefetch" href="/assets/js/40.c0c20697.js"><link rel="prefetch" href="/assets/js/41.9b011cdb.js"><link rel="prefetch" href="/assets/js/42.c7ed81b4.js"><link rel="prefetch" href="/assets/js/43.af960231.js"><link rel="prefetch" href="/assets/js/44.7f72520f.js"><link rel="prefetch" href="/assets/js/45.6a849f65.js"><link rel="prefetch" href="/assets/js/46.f7436522.js"><link rel="prefetch" href="/assets/js/47.b074fa6f.js"><link rel="prefetch" href="/assets/js/48.2ad9a324.js"><link rel="prefetch" href="/assets/js/49.67b21669.js"><link rel="prefetch" href="/assets/js/5.96b913ab.js"><link rel="prefetch" href="/assets/js/50.11cffc73.js"><link rel="prefetch" href="/assets/js/51.71f6236a.js"><link rel="prefetch" href="/assets/js/52.0ac6746b.js"><link rel="prefetch" href="/assets/js/53.a888350c.js"><link rel="prefetch" href="/assets/js/54.12108c56.js"><link rel="prefetch" href="/assets/js/55.7c12b301.js"><link rel="prefetch" href="/assets/js/56.cba6814d.js"><link rel="prefetch" href="/assets/js/57.f5a1f1ab.js"><link rel="prefetch" href="/assets/js/6.30321463.js"><link rel="prefetch" href="/assets/js/7.0c3e09a8.js"><link rel="prefetch" href="/assets/js/8.c5e278a2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5f17164d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">曹乐乐的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/算法/0算法题.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/js/1基础类型.html" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/ts/1安装和编译.html" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/1基础.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/react实现/1redux实现.html" class="nav-link">
  React实现
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/1Node入门.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blog/工程化/1webpack的常用loader和plugin.html" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/blog/通信/1AJAX.html" class="nav-link">
  通信
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="留言" class="dropdown-title"><span class="title">留言</span> <span class="arrow down"></span></button> <button type="button" aria-label="留言" class="mobile-dropdown-title"><span class="title">留言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/message/message.html" class="nav-link">
  留言
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/算法/0算法题.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/js/1基础类型.html" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/ts/1安装和编译.html" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/1基础.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/react实现/1redux实现.html" class="nav-link">
  React实现
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/1Node入门.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blog/工程化/1webpack的常用loader和plugin.html" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/blog/通信/1AJAX.html" class="nav-link">
  通信
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="留言" class="dropdown-title"><span class="title">留言</span> <span class="arrow down"></span></button> <button type="button" aria-label="留言" class="mobile-dropdown-title"><span class="title">留言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/message/message.html" class="nav-link">
  留言
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>算法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/算法/0算法题.html" class="sidebar-link">算法题</a></li><li><a href="/blog/算法/1栈.html" class="sidebar-link">栈</a></li><li><a href="/blog/算法/2队列.html" class="sidebar-link">队列</a></li><li><a href="/blog/算法/3链表.html" class="sidebar-link">链表</a></li><li><a href="/blog/算法/4BitMap.html" class="sidebar-link">BitMap</a></li><li><a href="/blog/算法/5二叉树.html" class="sidebar-link">二叉树</a></li><li><a href="/blog/算法/6堆.html" class="sidebar-link">堆</a></li><li><a href="/blog/算法/7Union-Find并查集.html" class="active sidebar-link">并查集</a></li><li><a href="/blog/算法/8排序.html" class="sidebar-link">排序</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React实现</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>通信</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="union-find并查集"><a href="#union-find并查集" class="header-anchor">#</a> Union-Find并查集</h1> <h2 id="并查集的作用"><a href="#并查集的作用" class="header-anchor">#</a> 并查集的作用</h2> <p>并查集主要用来解决集合类的问题，集合间的连通性问题</p> <h2 id="并查集的实现"><a href="#并查集的实现" class="header-anchor">#</a> 并查集的实现</h2> <p>主要有两个操作</p> <p>find：查询节点所在的集合</p> <p>merge：合并两个节点所在的集合</p> <h3 id="方案a-quick-find"><a href="#方案a-quick-find" class="header-anchor">#</a> 方案A:quick find</h3> <p>用数组存储每个索引对应的集合，数组的值就是集合的名称代表。</p> <p>时间复杂度</p> <p>查找：O(1)</p> <p>合并：O(n)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Unionfind</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token comment">//初始化每个节点的值为自己，每个不同的值都是一个集合</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 查找所在集合</span>
<span class="token class-name">Unionfind</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 合并集合</span>
<span class="token class-name">Unionfind</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">merge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> UnionX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>x<span class="token punctuation">]</span>
    <span class="token keyword">let</span> UnionY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>y<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>UnionX <span class="token operator">==</span> UnionY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 数组内：集合为X的节点都变成Y</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> UnionX <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> UnionY<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="方案b-quick-union"><a href="#方案b-quick-union" class="header-anchor">#</a> 方案B:quick union</h3> <p>将各个集合抽象成倒着的树，每个儿子节点指向父亲节点，根节点指向自己</p> <p>即根节点<code>data[i] = i</code>，儿子节点<code>data[i] = fatherIndex</code></p> <p><img src="data:image/jpeg;base64,UklGRkAXAABXRUJQVlA4IDQXAABwggCdASpYAgIBPpFIn0slpKMhojLqKLASCWlu/HyZVOtQzv1b/v3bP/l+mf90Z4/y34YOpf9v6Gfyn7wfx/7f59f6T+2fkB6M/HP/I9QL2P/k95tm19QL2P+qf7/7k/hw+w81/hl+AL9df+JxsPpnsBfo30J//j/VeiH6p9hT+df3H/udk4a0eSxO7u7u7u7u7u7u7u7u7u7u7u7u7u55c+wjcE2nQySXzMyc2v4vSNGZmXIy9ow1jdXnnT7lAM7THoFHksTu7u7uqrUD5K1VfVtNtVdsVVJ6xp0CjyS5XIdQGELBL0TQzkfmtDGwOkaMzMzMzMxiTxHA7pmcmEGfb6XfUoBGVxTW+StOSUx9xnpYAsPeU7EXbaBXi2GvhVVVVVVVVR673NCa26f4GHkL4Kamoh6NOgUeSTUysyfiqYnlHJDMTyXo0SdI0ZmZmZmXIhHd8E2XlV/doqn8iL45XJmKJkgKJvZHxWI1JNMjU4j21Y0YIzzdPrTpGjLbwMp7g8Pge7uCbTr1wzvRiQwNOgUeSS7+v+9UYy7X8g6KKDN4QgWV3wYRYBNY9hwLkLsm1ryfecd1MekGvTWtlkHF9B+VV8arJd37TznKYnbcjDTnSHzTxebQQtLxgzgb+7KXAJcSgFlfiqskQi6QB2pzXyMTB6bJIEsToBf29VzS9D/6phzS0EQVCMqZFYYNHev+qntaIET3s2ozA4GYIOgPnRayWiyJzwfNfa8TAgFhKLd4aC1FeH1iksyG8KYl/R9205oPCjl3CIQKaZkzQCBGUSPmGQFu89Oe2FrKcGaqqpS1rik1bG+CYhcTgpMcIIbG6zqryEUGJ0MKiTu8sWEN43X7EkwTC40mAgMxxFWhXbgFYyxS/OZQfR58zPFsQBrUsDOx3ROL54igypl/muUDGrSGvaC2PIRqFaRy4HowJiTG4CW6J28NOgN8cBydkUCKevCKCIllWrFROAP0QRKDFlRbHwPTmCVCqYGBzY8dd/dpLTwzpKXJzJsGGPlcLH+qfRaJQ+fmfFyxY3ZWtCGSdGheD9D8e+JxjlpRrohz+n/5n+z+hQ5yyP4FpY9P3stcDThZsQtsGbsehD0ZDPrJNFa0iHW8W7o2kXXWg/3n0+0tI6x9INVw7T/euK0tuX6WNQ5T98ClzD6Y4QMa323FVVVVMUig9sSddJMzcmCjyWJ4ZNprfJWnSNGZmZlx2/nNd8m5eaIqby/5GB6pcKqqqqqqqqqqqqqqqqqqqlJz+Xk5qxmBq+R+Qpvv8C01vkrTpGjMzMzMzMzMzLp17eWuGOgO8IWyZIVmg0izMzMzMzMzMzMzMzMzMzMttA8U88s8DLatLlemT6PFECzMzMzMzMzMzMzMzMzMzMzzBL5K06RozMzMzMzMzMzLYAD+/1kAAY6Cds0pXlTu1plUpCBmjRM/T8ij5HVrOT/h4p1WN41wQ19/Ro8mzCsD4iOd9wIjmm+H6Rn37VQcEwJgwffzUQ2msDFnW5Px5ymLZV9HgXKtoHuNcIy1opaDP1/W4b+v3jScnMti9UpslsPGmVAEyhGo6PnCyX8iFwBNJFG6aJyGlKrTDeaTzdISyw/gBnHddykcOCEdHKMOX+eRciKxhnUwhUjUUVrRZ6la8LfALzCcJwEeDVNJ3a2jTLQbhgiVxoUuHLbbKUxo10wWGSrUG+9tj8YtRj3AaGhoF1q9YDRweC0dxxRszQFKWmIYC5/5HlxfQFUGJb5biqDoEb/FY9rwktqQyv3z49wuOU4U1JpIlKa4sIXXilu28Wll9RjMlnsJMwt/5yBceq0ktJhZDwkC8BfTIodGAo/xnTRz/c/g1z5GYwSNy4KRzjpqjd9PTWlJKsXkEfrSqSwvZCxoqNbLfbnwoQuCouxMgXUjfFaIZaBhQ6GON0ir2t3mH5A2CZ2BlSBQDlbS4AaSkYP9oh+3TUCUA6AJG2LJTc1KSHuRGxNkNsqNYXhKzH9MhI8oVDog9ya16DNCBchWp0OzvO/CVy7x7h31x9u526pA5gO29zMMLZbcSKsAAaqfQi/UM5TlgagtGgO4xHfDmfCOoVpvlhIlY0HUjN9iKKJ9z93PT5j/zXIw/ixeigJ+M/SP/AwOtM3Rylgt79tsKWUwURBORQlUPhYc+fV1gmKHyxRkBE3Ca7Ndm16wYSXOgxqXpldRyVoOTWWgpr/HA5OoK8GXjQWA+eKCfOJMIReoFwCOwajRMhBTykN9exbIesNMyc89Bxrlk08uvDvcI9n0qjvFq9W+q+9sveUTUnCVkwJfggiTP64ACa0jydj6rOdjr7E1GMEt9NvU4i2AlylknPbMBWQVblJiNCUuD29V0Ujl6iU26jy2HfVnyyws+uFj4oCQ7XRX+j0TOk5sxxEHves6Hi+LOsVzGY0ypY8d7s9W10CBiWSpzqAcQyhLuY3dSgF38iNIC54DEXCxipd9iuo0YezpdMFSVQPZbihFJN1P7joswD5LHd78sEXbB7dW/3Xvcd4cYmyex7X+jBYj5ADVc7QQnF6mQe9PxHgRdPoe+o9Xz+dRfFS0i5eVo4uOE7tZGG4omict7a8MvUTAO7ITqxs53ErIY9jQf4UHq5lY8kXbmbnvm0WbyjybeFhLGJzmuPVvFO1Ip2MH4XIYBz7l2a4x+tMdMuScjsY1wUg2384oyrBmuGhxz3WUWUtDbkZP1h3meEPCxF8LZcih8xCWgG65SnRy5IKsAAyJDC2BKNeJQ2jnbOOf5JMOV832cVW8Sg4hf02y6TNFq7qUc6WdGf1qTin68++5bJDdVN0Oh58mbjsnmLwuisd9bV72Rj7HKwFTHbSCtUCVnZiqZD+fSqZlAj6jyIrmcdD/bl0JB18Dtbf9Zb7h29nGb3snaTp+ViTT+xZmeEKq0cSNnqoVYK+ocuDvMaafAehcHD//2BA0iLxsyncM1RYBrspqRx1PC783nzc06fPuzzhqpkoCiTY8AeOXA8kWAXCffootupAnjFQ0KA5ZiXkJJ6ZED9ZxktrHjNoxN8jv5ixumJyMIZjURB343fgIe7/xx/EXR0BHRTNFUdChOObr8hmukjSFJJwNynuL7+96xfQoPy0S6xYF/XaR4C5C0EjRT+W1Fb3ipdij5BvkS4NMkON6eefXXdKSiVnndT3cnTWt5VRk5YTrbcNmdb6YTUh+Hds3oxLFzPag2KUYyvnjyVSPofJXVOF3hLuJeKW305rw3lkbPFxcovegL/s0k3LYFSDqe9DoIvuLjpc/4TlTch2gjBRD38u8JOu6BdTSAD5B6wsN/zG4aE6kCkyJSc2lVbdxW+SXz+LLl6ubqrjQ9KFNJBzFu9c8SCmchjeXtAWhtEDA+IhZSUtxQoR7pUuevJ3Ef08BLIp4cUTmZzlNFI0Nv1eJWrq+QUOcVLwEf2npkxv4yb7Ht65LEIx8k0t5U5iRLC8KkYCPDavYCN3D70gJL49xH/ZDKTOt4ttEEJsqFXhcHkpKvnmCQv+JctKnvTHngVImQl9hPjbOsBaKybXsbzV1a+9hHcGfXCIJcO27YxQoWgNo7KymeamdyVYWAJgp5rckgbXOkhCUEO5Q2jVqRlnmNEDocQzYdpEYqV55yKVny1iyi+c1We5qCq9b1ylpSQLppFwFUetLehUlLs8k0RXlRTw7R9b8eT01gzG2q9W0P2eFkB935Hzf430Fks2gn7AjXdyMKMcy9TrChKgjHkXg9mSTaVrOdjBmdblYXnE+PxZRzdsrw9866OwrxKfTEDq2fG9MXAGpc5JY0bZgHbbIMvYKZB8w3xbpwgwL6ZXWnsVKwKoN+GM/ZYCZat9neYJbLp5UR2lE97MwGC0jepI2H/4jhxBjzaRvSwCoWOgrdbq9gzax9CCL0G1eO/uPjd64FzA5CY76+vQ3ppY9AyFqEPRgIk81VDeAPpSU5RCaxwW+xZfcJcAmPjXKx2lYn8+zIkQxlDYWxPWLLOoSgkOcv8qmrC3k3bUPy7rYcC1pUZwWtGdlm4Kj9PHOM2tAjf+VGnJif3VRk3FdhS9B3NjJQ6l66AnSfetrzuh3Q6GxRJeIjQauDRxN1Mu1xRsDoBjuDbXOWBhQ82PbQgYlwvBQOdl9rl8K9mCe2e7w5Pph5QuLbHkY9Wf7L24/rfXY0EN0lKabOPXElcYAdpBvCzKJICrJ995In7LL56PHKR1mJGv9R67kUeMy39nJ9I4MOrPXHP04cat3QHs1TVVta9nIvQj6kW+B6yGaOsmdhnoiHWACM/2f5Fgvyo7RcHSY0yhNt+/d0LYU0beBtzEJ12qENAKyISELD2UWlLDQYpfwN9jjX9v6jBzumUZTCRkjPm0s2ZE0v1fm/hQn9c63nivmYDNi0ou/9PqHQr0yh7uE9mYbVJZfGf8TOEdGAHPBG7CEbUqa2xu+ca1XwxRNE+7sj19+DnkOKz37y2SWLH8AZcPRZK0/UTa4LxMXvbmytyYV/keda8/NYyiJjtiH5IZKB/JtJg+EvucozJyFUaWrxgWHA2mDosZz4WqwDz0sdJuFv0a6nViGZjfisL0yVIjHBFkqMuSmCc83Fkpd2g3goaJ1Ilj/IwdghwY0j3BSPMradNyXJ/Tjxbgv7ID9+JAVvjNNm9inVi7j2S5sRsPoEkSS7DQYb53uiC9soPTpInFkzN5mszfwUpujlLBQ5ZhnvgRWPxat5PVN4Kxy389h+GfJN35sYxTe7IlbG+l669Cp6q3YzhTILV2XCSrmGuOdfvzQ1dZpAfxWYQGQOkEOk40eTm92NSo+xl38qsbbfmLBaGdH9f1aLa4Z1srxFCq+ZF9nF5tfy109ESTYgR9T7l03a/UKuR+kZInkJVSpxPbxtlFlyPHQ1WwTxj9ezi6nadPIXGcMzEG0sZU4klURasctDflWjq3TgGT8kgyiWgr/e+cBN7BGE41ZH75EV9osw2qjbxo9J4ZkqGhy9D+E00v3AgrirERKlN0jiCFt7UfJPY5OHyB0UIqxXQDTPEhCXi6W7RGnuNYMqGjKACJq4Xtc/niLGGrA3SFPK+mWpAZMzAAFOGXEg5RPMy0/52Y2jtN2crXhrpMQ3pxgo2S5n4RTMghT2KOklWIeBqJQBvdpZkxbEnUxlRg/Z5FiU4JfUNSwnJKFEJHKue+OyhHiQVdgO2qbPP4w9cEJjlNQj30+I7xQ246mEzy2mH+sFnTEwt59G7zA3Jb+DF3eRGAP9VtF/11mtSH3HDlr6yqp5DTbl4Rai0wYXzS4t034cseYSGxz1MvL6PJkofMW/hwG+R2jMHrcGmLOYX/HSP3WamZ6womWT1LvxmD+Z+tahXafmfNPXnMbIbPBkBxWXG84tI0wlYzQd1Hd/cJmqVMIpVXUO+eosGoxE//99dxSrmA55meSN7Xe9VLcpmL5thmBT4+3+sWT57kYrdYbsoqgLzTDXwrBUkovA92LteW7fxmIkOa7Uct9++KIHFpLdv6tB491rMlNcU0/Ie+NJmf23GvaBpro+JobYtPKD00mn9gJV/Rjri5QN+5e++ToAOA1q+NtqNHCOycNG/0GjEpIcJsiERSKMAflHm1OnygbOHsWyr595JbGhuF/t33ZLIBfXc/uSQ/vijNC2CfRiExfBXum36r0XBeTA1C7qhSm1glm7Dl6if+i+gzCpWfd7Rkjt92jFN/Z4Q61WTispJ4F5c1DM6MA7Z6XUHTscFJxhdqFx/M/cc/i1UJwVort9igDfkawZG2EVfhW7g6pAFBPSzQgHn1k4UBfw1pRn5rQFh5JKEzGcjMrNM4YG8NS/fYYLD88xZ1ZN/d8r+mBj5WxZYtVD7jAyMcrsWcZVrkvcBLYgFjzPCqXTcV5nmjs6fo/7xjrJ7XYA5F8zp7GZ5ySB/8C+FpoG6toxtaYL4798gfYG6Vl9v3A+9zLW9eQl6SRR0xlZie1XbOj52/bvJs8dZ7JGXazLdCRncP3I0LmpqPzITA/cJyc5S52GX70v+YTZZJbFQdSCwJjqx5t3wITgucsjsOTYQD8ciOD8iZSmP0okzw8DeW6q/wjN0ZpPNvC6B+FyMjvMXTIvmns+GcPH4nLDzSWWVAs6tj4D/tMwQbB9ozQHiIt8FModHkihvJ5B3yS8Pm1U+5yIB3F7dh7OPU/tpA3vTwM8MXUj98CRlQhBpWUWFmAi6BbBUa/fXRnqTXVzAt84eC4cs7jNAZhnem4RKPHJv7OTPTLGyhkWm0nqmIAZWSyIIkUuNKY1l+8wGVln0R2JYEje9FXtChmrTEK96cRu07L4p4GaoFscZMTp4S6xW5NzLqLc5hFgZfemdqKstBcCMxYYMBDo7k3xR8EcbEMzl0ey54U2Qkt9z/6oyUF52j2LlEuVuDARouVb5eXbwK8Z9xPUx05x+bHme0EcWIWXWf/talar1Apek6nWITMSpanVpUpUdu8VZQyfL3gWfdK3RdEYw7/ALt3JTMuOrzRf4PdhftefLLH2wvCvD6w0crvVlSVCfugKvBC55XHd7BIlz4laKITznLDAVJPCrJykgNHisKBH9kFiHW4ctoKe+4Uz4FSzYWzABMhcvx8uoAUfgBwBhGkg5E5yQfC9aCczIPqVS+gXICmicz31UktCQ/XyFS+rj+kvx+UjmrH7CysacJiQfoB0jwqAOjNdwO9sNYhV6SFjmcwrdxZ0jhSojetBGufsiCLh5HDiGPk12/Z8aEF2G5XiMcXgl8PW9YWfbTq/+9NnKlm/qXpI17Py+DJu1r612b/LUUFSuyfDlMkue4kUb+7HOjZzAqWzW7wl0YRmO4e8F5ca+kksla4TWL5I/kqatLf0Emcp9NKmnginIxXcas8svYcWXMQMwW3Vx5QMeJuBRED4HaRVWCR39L2N9epaby9pgIW0ryD81lv4jMXUx2n81MtnJ0USqLF2+/D8pWsyrtRmXeDtv+aqhgDqAGkXZBuWhhRbqwIzzXtzUYhCVdBW7/LL2wNUzQRAKzvg3KT7h27DG0Fh0v1Fe76MvQpYXONYrOe4m3iIwdRMcg/vdDRRCHDIIUIuaGWcaVSxBFzkHBi8i6L4mJLnY3aKiwl/2ygFpk2NsI0OKq7+FUvNre6eG3j865GX7ZJ0L/v21UGtSdO1E0fqUBLtzO2Cb8fUH2g75f6EYDwRgqwYdx6ALabPVkpY3KhEvkCj5PFStxf6Z0cPpIxnloNsXNBCEHLxuWje/VUAXYeAeMhDoj9FD9vHRthbS4ynJi8eJ57ZJTGZZWEr80D6ulzcBjOBnsCbBj2mXTCYI/LyuK7rXEtO5ni1gn2IFrVZDc773m7NcdOnCTgfNvBwULg5MzmJJhbdsLN+x36pzt7GL/TJ+9sWI6vZjm0Q/vOW5Ag4naM2kGgxj2WXvu9J4M3wCxU+cMQ9IBmb5Y954/ugtYeWT8+Rruv/6daPb1+y63oaDMzQMcu7w4MGwixIkEmIwPs4yxLqedLc1ZgUxLIp/RE+B9FcD65y4Pk5KkDa3EYtwKQKmbHQXNQNaPMSlr0oX+cpS/VEygTxDU6eQlKC4auZQ03R4uav55BCoVu/taLTplfUvkt42KGKzlYDPawfxXl8Igj25+x/plvChpp3qmUtuX47C9LFWztJXFf5Zr256Cs2136R8hlZBxz33z4R30bIoU/KGQAlnB+YHKxRTWZEUnhXD+bvoDcdQCrCWvCIV6ikTht64GvjfK4cfmxNvcv+cV9xL7Ed+Hf4waKaAgQPNycg1GEehTFHsXGjf043FGSXfiK5Fd1jFfnO06wvaS21dj/Ffd++rI30Sv9FXAf15EgKNtGFyveIGohVrZsJKTSgDJ48FAmkcD/iTwU8RHxLl9c0s4HVi1qb9/NkmWFyuYucnTSEymOSjDlrObmyNKrfhWWSWmu/9Vh4UZRVdTnoc5I1dDLjpokMYRpQw6Jl6zHNAAScbOAAAA=" alt=""></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Unionfind</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token comment">//倒着的树，儿子指向父亲。根节点指向自己</span>
    <span class="token comment">//初始时都是独立的树，都是根节点，都指向自己</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 查找所在集合，需要一直查，直到指向自己</span>
<span class="token class-name">Unionfind</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> root <span class="token operator">=</span> i
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">!==</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> root
<span class="token punctuation">}</span>

<span class="token comment">// 合并集合</span>
<span class="token class-name">Unionfind</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">merge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> UnionX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token keyword">let</span> UnionY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>UnionX <span class="token operator">==</span> UnionY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 集合X的root指向y集合根节点，所有的节点都挂到y节点上了，y节点的根节点称为两个集合的根节点</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> UnionY
<span class="token punctuation">}</span>
</code></pre></div><h3 id="方案b的优化"><a href="#方案b的优化" class="header-anchor">#</a> 方案B的优化</h3> <p>一：带权合并</p> <p>在执行merge时，上个实现是无规则的将两个树合并成一个。</p> <p>我们可以优化：挂载时将少的节点树挂到多的节点树上，这样合并后较少的节点多个一个父级。（另一种思路是将树高低的合入树高高的）</p> <p>二：路径压缩</p> <p>树的合并极端情况下会合并成为一个链表，查找根节点遍历次数很多，
可以在每次find操作时，直接将遇到的节点都指向根节点，减少后面查找根节点的遍历次数。</p> <p>路径压缩示意图：</p> <p><img src="/assets/img/bingchaji2.44ee1da5.jpg" alt=""></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Unionfind</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token comment">// 增加一个以i为根节点的树的节点数量，初始都为1</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 查找所在集合，需要一直查，直到指向自己</span>
<span class="token class-name">Unionfind</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">find</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> root <span class="token operator">=</span> i
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">!==</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        root <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>root<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//路径压缩：将遍历时遇到的各层节点都直接指向根节点</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> t <span class="token operator">=</span> i
        i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> root
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> root
<span class="token punctuation">}</span>

<span class="token comment">// 合并集合</span>
<span class="token class-name">Unionfind</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">merge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> UnionX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token keyword">let</span> UnionY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>UnionX <span class="token operator">==</span> UnionY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 带权合并：</span>
    <span class="token comment">// 挂载时将少的节点树挂到多的节点树上，这样较少的节点多一个父级</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>UnionX<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>UnionY<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>UnionX<span class="token punctuation">]</span> <span class="token operator">=</span> UnionY
        <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>y<span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>UnionY<span class="token punctuation">]</span> <span class="token operator">=</span> UnionX
        <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>treeSize<span class="token punctuation">[</span>y<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/算法/6堆.html" class="prev">
        堆
      </a></span> <span class="next"><a href="/blog/算法/8排序.html">
        排序
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.fdf1d93e.js" defer></script><script src="/assets/js/2.07a58c5b.js" defer></script><script src="/assets/js/9.2c3ca298.js" defer></script>
  </body>
</html>
