<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>曹乐乐的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="曹乐乐的博客">
    
    <link rel="preload" href="/assets/css/0.styles.5f17164d.css" as="style"><link rel="preload" href="/assets/js/app.fdf1d93e.js" as="script"><link rel="preload" href="/assets/js/2.07a58c5b.js" as="script"><link rel="preload" href="/assets/js/57.f5a1f1ab.js" as="script"><link rel="prefetch" href="/assets/js/10.4150cfd4.js"><link rel="prefetch" href="/assets/js/11.6765a058.js"><link rel="prefetch" href="/assets/js/12.13ff42eb.js"><link rel="prefetch" href="/assets/js/13.6ce5732c.js"><link rel="prefetch" href="/assets/js/14.070af781.js"><link rel="prefetch" href="/assets/js/15.23bba5f9.js"><link rel="prefetch" href="/assets/js/16.dc60a072.js"><link rel="prefetch" href="/assets/js/17.670ce392.js"><link rel="prefetch" href="/assets/js/18.31df696f.js"><link rel="prefetch" href="/assets/js/19.0afd4116.js"><link rel="prefetch" href="/assets/js/20.4c748499.js"><link rel="prefetch" href="/assets/js/21.3aa4b0bf.js"><link rel="prefetch" href="/assets/js/22.de10d1ac.js"><link rel="prefetch" href="/assets/js/23.f15ae632.js"><link rel="prefetch" href="/assets/js/24.086120e5.js"><link rel="prefetch" href="/assets/js/25.d9758788.js"><link rel="prefetch" href="/assets/js/26.4cf5343b.js"><link rel="prefetch" href="/assets/js/27.8c626774.js"><link rel="prefetch" href="/assets/js/28.1334e3f2.js"><link rel="prefetch" href="/assets/js/29.f0f86908.js"><link rel="prefetch" href="/assets/js/3.63acc60a.js"><link rel="prefetch" href="/assets/js/30.ccb08c8f.js"><link rel="prefetch" href="/assets/js/31.15a648d6.js"><link rel="prefetch" href="/assets/js/32.d22ae5f4.js"><link rel="prefetch" href="/assets/js/33.da1f97ee.js"><link rel="prefetch" href="/assets/js/34.ed44f4a3.js"><link rel="prefetch" href="/assets/js/35.24064e1d.js"><link rel="prefetch" href="/assets/js/36.dbd7d03f.js"><link rel="prefetch" href="/assets/js/37.e2a4ac65.js"><link rel="prefetch" href="/assets/js/38.6a9661f9.js"><link rel="prefetch" href="/assets/js/39.1fdb657d.js"><link rel="prefetch" href="/assets/js/4.13d9dc14.js"><link rel="prefetch" href="/assets/js/40.c0c20697.js"><link rel="prefetch" href="/assets/js/41.9b011cdb.js"><link rel="prefetch" href="/assets/js/42.c7ed81b4.js"><link rel="prefetch" href="/assets/js/43.af960231.js"><link rel="prefetch" href="/assets/js/44.7f72520f.js"><link rel="prefetch" href="/assets/js/45.6a849f65.js"><link rel="prefetch" href="/assets/js/46.f7436522.js"><link rel="prefetch" href="/assets/js/47.b074fa6f.js"><link rel="prefetch" href="/assets/js/48.2ad9a324.js"><link rel="prefetch" href="/assets/js/49.67b21669.js"><link rel="prefetch" href="/assets/js/5.96b913ab.js"><link rel="prefetch" href="/assets/js/50.11cffc73.js"><link rel="prefetch" href="/assets/js/51.71f6236a.js"><link rel="prefetch" href="/assets/js/52.0ac6746b.js"><link rel="prefetch" href="/assets/js/53.a888350c.js"><link rel="prefetch" href="/assets/js/54.12108c56.js"><link rel="prefetch" href="/assets/js/55.7c12b301.js"><link rel="prefetch" href="/assets/js/56.cba6814d.js"><link rel="prefetch" href="/assets/js/6.30321463.js"><link rel="prefetch" href="/assets/js/7.0c3e09a8.js"><link rel="prefetch" href="/assets/js/8.c5e278a2.js"><link rel="prefetch" href="/assets/js/9.2c3ca298.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5f17164d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">曹乐乐的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/算法/0算法题.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/js/1基础类型.html" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/ts/1安装和编译.html" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/1基础.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/react实现/1redux实现.html" class="nav-link">
  React实现
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/1Node入门.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blog/工程化/1webpack的常用loader和plugin.html" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/blog/通信/1AJAX.html" class="nav-link">
  通信
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="留言" class="dropdown-title"><span class="title">留言</span> <span class="arrow down"></span></button> <button type="button" aria-label="留言" class="mobile-dropdown-title"><span class="title">留言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/message/message.html" class="nav-link">
  留言
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title">目录</span> <span class="arrow down"></span></button> <button type="button" aria-label="目录" class="mobile-dropdown-title"><span class="title">目录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/算法/0算法题.html" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/js/1基础类型.html" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/ts/1安装和编译.html" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/1基础.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/react实现/1redux实现.html" class="nav-link">
  React实现
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/1Node入门.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/blog/工程化/1webpack的常用loader和plugin.html" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/blog/通信/1AJAX.html" class="nav-link">
  通信
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="留言" class="dropdown-title"><span class="title">留言</span> <span class="arrow down"></span></button> <button type="button" aria-label="留言" class="mobile-dropdown-title"><span class="title">留言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/message/message.html" class="nav-link">
  留言
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React实现</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>通信</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/通信/1AJAX.html" class="sidebar-link">AJAX</a></li><li><a href="/blog/通信/2即时通信.html" class="sidebar-link">即时通信</a></li><li><a href="/blog/通信/3http.html" class="active sidebar-link">http</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>通常我们使用的网络是在 TCP/IP 协议族的基础上运作的。而 HTTP 属于它内部的一个子集。</p> <h3 id="tcp-ip-的分层管理-四层"><a href="#tcp-ip-的分层管理-四层" class="header-anchor">#</a> <strong>TCP/IP</strong> 的分层管理 （四层）</h3> <h5 id="应用层"><a href="#应用层" class="header-anchor">#</a> 应用层</h5> <p>应用层决定了向用户提供应用服务时通信的活动。 FTP、DNS、HTTP 协议等处于该层。</p> <h5 id="传输层"><a href="#传输层" class="header-anchor">#</a> 传输层</h5> <p>提供处于网络连接中的两台计算机之间的数据传输。</p> <p>在传输层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和 UDP（User Data Protocol，用户数据报协议）。</p> <h5 id="网络层"><a href="#网络层" class="header-anchor">#</a> 网络层</h5> <p>网络层用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。</p> <p>与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线。</p> <h5 id="链路层"><a href="#链路层" class="header-anchor">#</a> 链路层</h5> <p>用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱 动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等</p> <p>物理可见部分。硬件上的范畴均在链路层的作用范围之内。</p> <h3 id="ip-协议"><a href="#ip-协议" class="header-anchor">#</a> IP 协议</h3> <p>IP 协议的作用是把各种数据包传送给对方。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是 IP 地址和 MAC地址（Media Access Control Address）。</p> <p>IP 地址指明了节点被分配到的地址，MAC 地址是指网卡所属的固定地址。IP 地址可以和 MAC 地址进行配对。IP 地址可变换，但MAC 地址基本上不会更改。</p> <p>IP 间的通信依赖 MAC 地址。在网络上，通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的MAC 地址来搜索下一个中转目标。这时，会采用 ARP 协议（Address Resolution Protocol）。ARP 是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。</p> <h3 id="tcp-协议"><a href="#tcp-协议" class="header-anchor">#</a> TCP 协议</h3> <p>为了<strong>准确无误地将数据送达目标处</strong>，TCP 协议采用了<strong>三次握手</strong></p> <p>1.Client端首先发送一个带 SYN 标志的数据包给对方。</p> <p>2.Server端收到后， 回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。</p> <p>3.最后，Client再回传一个带 ACK 标志的数据包，代表TCP连接就建立。</p> <p>若在握手过程中某个阶段莫名中断，TCP 协议会再次以相同的顺序发送相同的数据包。</p> <p><strong>中断连接</strong></p> <p>1.Client端发送FIN报文，表示没有数据发送了。</p> <p>2.Server端发送ACK表示收到请求了，但Server端可能还有数据要发送。</p> <p>3..Client端进入FIN_WAIT状态，继续等待Server端的FIN报文，当Server端确定数据已发送完成，则向Client端发送FIN报文。</p> <p>4.Client端收到FIN报文后，向Server端发送ACK，等待一点时间没有收到回复，就关闭连接。</p> <h3 id="udp协议"><a href="#udp协议" class="header-anchor">#</a> UDP协议</h3> <p>是一个非连接的协议，传输数据之前源端和终端不建立连接</p> <h3 id="dns-服务"><a href="#dns-服务" class="header-anchor">#</a> <strong>DNS</strong> <strong>服务</strong></h3> <p>DNS 协议提供通过域名查找 IP 地址，或逆向从 IP 地址反查域名的服务。</p> <h3 id="通信过程"><a href="#通信过程" class="header-anchor">#</a> 通信过程</h3> <p>客户端通过dns服务查到域名对应ip，发送http请求报文，tcp协议可靠的将http传给对方，这期间，ip协议搜索对方的地址，中转和传送给目标。</p> <p>服务端通过tcp协议重组http报文数据包，根据http协议知道需要的资源。</p> <h3 id="uri-和-url"><a href="#uri-和-url" class="header-anchor">#</a> <strong>URI</strong> 和 <strong>URL</strong></h3> <p>URI 用字符串标识某一互联网资源，而 URL表示资源的地点（互联网上所处的位置）。可见 URL是 URI 的子集。</p> <h3 id="http-协议介绍"><a href="#http-协议介绍" class="header-anchor">#</a> <strong>HTTP</strong> 协议介绍</h3> <h5 id="无状态"><a href="#无状态" class="header-anchor">#</a> 无状态</h5> <p>协议每当有新的请求发送时，就会有对应的新响应产 生。协议本身并不保留之前一切的请求或响应报文的信息。</p> <h5 id="持久化"><a href="#持久化" class="header-anchor">#</a> 持久化</h5> <p>HTTP 协议的初始版本中，每进行一次 HTTP通信就要断开一次 TCP 连接，增加通信量的开销。</p> <p>在 HTTP/1.1 中，所有的连接默认都是持久连接，</p> <p>持久连接的特点是，只要任意一端没有明确提出断开连接，则保持TCP连接状态。</p> <h5 id="管线化"><a href="#管线化" class="header-anchor">#</a> 管线化</h5> <p>持久连接使得多数请求以管线化方式发送成为可能。从前发送请求后需等待并收到响应，才能发送下一个请求。</p> <p>管线化技术出现后，不用等待响应亦可直接发送下一个请求。</p> <h5 id="http-协议请求报文格式"><a href="#http-协议请求报文格式" class="header-anchor">#</a> HTTP 协议请求报文格式</h5> <p>请求行：请求方法、请求 URI、协议版本</p> <p>请求头：</p> <p>（空行）</p> <p>请求实体。</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token request-line"><span class="token method property">POST</span> <span class="token request-target url">/submit.cgi</span> <span class="token http-version property">HTTP/1.1</span></span> 
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">www.hackr.jp </span></span>
<span class="token header"><span class="token header-name keyword">Content-Length</span><span class="token punctuation">:</span> <span class="token header-value">1560</span></span>

userage=1
</code></pre></div><h5 id="http-协议响应报文格式"><a href="#http-协议响应报文格式" class="header-anchor">#</a> HTTP 协议响应报文格式</h5> <p>响应行：协议版本、状态码、解释状态码的原因短语</p> <p>响应头</p> <p>（空行）</p> <p>响应实体</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token response-status"><span class="token http-version property">HTTP/1.1</span> <span class="token status-code number">200</span> <span class="token reason-phrase string">OK </span></span>
<span class="token header"><span class="token header-name keyword">Date</span><span class="token punctuation">:</span> <span class="token header-value">Tue, 10 Jul 2012 06:50:15 GMT </span></span>
<span class="token header"><span class="token header-name keyword">Content-Length</span><span class="token punctuation">:</span> <span class="token header-value">362 </span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">text/html </span></span>

&lt;html&gt; 
...
</code></pre></div><h3 id="http-状态码"><a href="#http-状态码" class="header-anchor">#</a> <strong>HTTP</strong> 状态码</h3> <p>200 OK</p> <p>206 该状态码表示客户端进行了范围请求。响应报文中包含由 Content-Range 指定范围的实体内容。</p> <p>301 永久性重定向</p> <p>302 临时重定向</p> <p>304 客户端发送附带条件的请求 2 时，服务器端允许请求访问资源，</p> <p>307 禁止重定向时 POST 变换成 GET，如果重定向时post被改成get请求会丢失请求主体访问失败。</p> <p>400 请求报文中存在语法错误</p> <p>401 用户认证失败</p> <p>403 访问权限出现某些问题</p> <p>404 无资源</p> <p>500 服务器端在执行请求时发生了错误</p> <p>503 明服务器暂时处于超负载或正在进行停机维护</p> <h3 id="http头部"><a href="#http头部" class="header-anchor">#</a> HTTP头部</h3> <h5 id="格式"><a href="#格式" class="header-anchor">#</a> 格式</h5> <p>头部字段名: 字段=值 ,字段=值</p> <div class="language- extra-class"><pre class="language-text"><code>Keep-Alive: timeout=15, max=100 
</code></pre></div><h5 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h5> <p>HTTP 头部字段根据实际用途可分为以下 4 种类型。</p> <p>通用头部字段、请求头部字段、响应头部字段、实体头部字段</p> <h4 id="通用头部字段"><a href="#通用头部字段" class="header-anchor">#</a> 通用头部字段</h4> <h5 id="connection"><a href="#connection" class="header-anchor">#</a> Connection</h5> <p>http1.1默认连接都是持久连接，当服务器端想明确断开连接时，则指定 Connection 头部字段的值为 Close。</p> <div class="language- extra-class"><pre class="language-text"><code>Connection:Keep-Alive
</code></pre></div><h5 id="via"><a href="#via" class="header-anchor">#</a> Via</h5> <p>报文经过代理或网关时，会先在头部字段 Via 中附加该服务器的信 息，然后再进行转发。</p> <p>头部字段 Via 不仅用于追踪报文的转发，还可避免请求回环的发生。 所以必须在经过代理时附加该头部字段内容。</p> <h4 id="请求头部字段"><a href="#请求头部字段" class="header-anchor">#</a> 请求头部字段</h4> <h5 id="accept"><a href="#accept" class="header-anchor">#</a> Accept</h5> <p>用来通知服务器，用户代理能够处理的媒体类型及媒体类型的相对优先级。</p> <p>使用 q= 来额外表示权重值,权重值 q 的范围是 0~1（可精确到小数点 后 3 位）。默认权重为 q=1.0。</p> <div class="language- extra-class"><pre class="language-text"><code>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
</code></pre></div><h5 id="accept-charset"><a href="#accept-charset" class="header-anchor">#</a> Accept-Charset</h5> <p>用来通知服务器用户代理支持的字符集</p> <div class="language- extra-class"><pre class="language-text"><code>Accept-Charset: iso-8859-5, unicode-1-1;q=0.8 
</code></pre></div><h5 id="accept-encoding"><a href="#accept-encoding" class="header-anchor">#</a> <strong>Accept-Encoding</strong></h5> <p>用来告知服务器用户代理支持的内容编码及内容编码的优先级顺序。</p> <div class="language- extra-class"><pre class="language-text"><code>Accept-Encoding: gzip, deflate 
</code></pre></div><h5 id="accept-language"><a href="#accept-language" class="header-anchor">#</a> <strong>Accept-Language</strong></h5> <p>头部字段 Accept-Language 用来告知服务器用户代理能够处理的自然 语言集（指中文或英文等）</p> <div class="language- extra-class"><pre class="language-text"><code>Accept-Language: zh-cn,zh;q=0.7,en-us,en;q=0.3 
</code></pre></div><h5 id="authorization"><a href="#authorization" class="header-anchor">#</a> <strong>Authorization</strong></h5> <p>来告知服务器，用户代理的认证信息</p> <div class="language- extra-class"><pre class="language-text"><code>Authorization: Basic dWVub3NlbjpwYXNzd29yZA== 
</code></pre></div><h5 id="host"><a href="#host" class="header-anchor">#</a> Host</h5> <p>头部字段 Host 会告知服务器，请求的资源所处的互联网主机名和端 口号。Host 头部字段在 HTTP/1.1 规范内是唯一一个必须被包含在请求内的头部字段。</p> <p><strong>If-Match</strong></p> <p>服务器会比对 If-Match 的字段值和资源的 ETag 值，仅当两者一致时，才会执行请求</p> <p><strong>If-Modified-Since</strong></p> <p>如果在 <strong>If-Modified-Since</strong> 字段指定的日期时间后，资源发生了更新，服务器会接受请求</p> <p>如果请求的资源都没有过更新，则返回状态码 304 Not Modified 的响应。</p> <h5 id="if-range"><a href="#if-range" class="header-anchor">#</a> If-Range</h5> <p>若指定的 If- Range 字段值（ETag 值或者时间）和请求资源的 ETag 值或时间相一 致时，则作为范围请求处理。反之，则返回全体资源。</p> <p><strong>Range</strong></p> <p>对于只需获取部分资源的范围请求，包含头部字段 Range 即可告知服 务器资源的指定范围。上面的示例表示请求获取从第 5001 字节至第 10000 字节的资源。</p> <div class="language- extra-class"><pre class="language-text"><code>Range: bytes=5001-10000 
</code></pre></div><h5 id="user-agent"><a href="#user-agent" class="header-anchor">#</a> User-Agent</h5> <p>创建请求的浏览器和用户代理名称等信息</p> <h4 id="响应头部字段"><a href="#响应头部字段" class="header-anchor">#</a> 响应头部字段</h4> <p><strong>ETag</strong></p> <p>资源被缓存时，被分配唯一性标识。</p> <p>弱 <strong>ETag</strong> 值</p> <p>弱 ETag 值只用于提示资源是否相同。只有资源发生了根本改变，产生差异时才会改变 ETag 值。会在字段值最开始处附加 W/。</p> <h5 id="location"><a href="#location" class="header-anchor">#</a> Location</h5> <p>配合 3xx ：Redirection 的响应，提供重定向的 URI。</p> <p>几乎所有的浏览器在接收到包含头部字段 Location 的响应后，都会强制性地尝试对已提示的重定向资源的访问</p> <h5 id="server"><a href="#server" class="header-anchor">#</a> Server</h5> <p>服务器应用程序的信息</p> <h5 id="vary"><a href="#vary" class="header-anchor">#</a> Vary</h5> <p>当代理服务器接收到带有 <strong>Vary</strong> 头部字段指定获取资源的请求时，如果里面的字段相同相同，那么就直接从缓存返回响应。</p> <div class="language- extra-class"><pre class="language-text"><code>Vary: Accept-Language 
</code></pre></div><h4 id="实体头部字段"><a href="#实体头部字段" class="header-anchor">#</a> 实体头部字段</h4> <p>用于补充内容的更新时间等与实体相关的信息。</p> <h5 id="content-range"><a href="#content-range" class="header-anchor">#</a> Content-Range</h5> <p>针对范围请求，返回响应时使用的头部字段 Content-Range，能告知客户端作为响应返回的实体的哪个部分符合范围请求。字段值以字节为单位，表示当前发送部分及整个实体大小。</p> <h5 id="content-type"><a href="#content-type" class="header-anchor">#</a> Content-Type</h5> <p>实体主体内对象的媒体类型</p> <h4 id="其他头部字段"><a href="#其他头部字段" class="header-anchor">#</a> 其他头部字段</h4> <p><strong>X-Frame-Options</strong></p> <p>设置能否被frame标签加载页面</p> <p><strong>DENY</strong> ：拒绝</p> <p><strong>SAMEORIGIN</strong> ：仅同源域名下的页面</p> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> Cookie</h3> <p>Cookie 会根据从服务器端发送的响应报文内的一个叫做 Set-Cookie 的 头部字段信息，通知客户端保存 Cookie。当下次客户端再往该服务器 发送请求时，客户端会自动在请求报文中加入 Cookie 值后发送出 去。服务器端发现客户端发送过来的 Cookie 后，会去检查究竟是从哪一 个客户端发来的连接请求，然后对比服务器上的记录，最后得到之前的状态信息。</p> <h5 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h5> <p>1.请求报文（没有Cookie信息的状态）</p> <div class="language- extra-class"><pre class="language-text"><code>GET /reader/ HTTP/1.1
Host: hackr.jp
</code></pre></div><p>2.响应报文（服务器端生成Cookie信息）</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200 OK 
Date: Thu, 12 Jul 2012 07:12:20 GMT 
Server: Apache
Set-Cookie: sid=1342077140226724; path=/; expires=Wed, 
10-Oct-12 07:12:20 GMT＞ 
Content-Type: text/plain; charset=UTF-8 
</code></pre></div><p>3.请求报文（自动发送保存着的Cookie信息）</p> <div class="language- extra-class"><pre class="language-text"><code>GET /image/ HTTP/1.1 
Host: hackr.jp 
Cookie: sid=1342077140226724 
</code></pre></div><h5 id="set-cookie头部字段属性说明"><a href="#set-cookie头部字段属性说明" class="header-anchor">#</a> Set-Cookie头部字段属性说明</h5> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: name=value; secure ; HttpOnly 
</code></pre></div><p>若设置secure在HTTPS连接的情况 下才会进行 Cookie 的发送。</p> <p>若设置HttpOnly后 document.cookie 就无法读取Cookie 的内容</p> <h3 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h3> <h4 id="http-1-0"><a href="#http-1-0" class="header-anchor">#</a> HTTP 1.0</h4> <h5 id="expires设置过期时间"><a href="#expires设置过期时间" class="header-anchor">#</a> expires设置过期时间</h5> <p>客户端再次请求该资源的时候，会把客户端时间与该时间戳进行对比，如果大于该时间戳则已过期，否则直接使用该缓存资源。</p> <p>问题：但是客户端时间和服务端时间可能不一致，且客户端时间可自自更改。</p> <h3 id="http-1-1"><a href="#http-1-1" class="header-anchor">#</a> HTTP 1.1</h3> <h4 id="cache-control"><a href="#cache-control" class="header-anchor">#</a> cache-control</h4> <p><code>cache-control</code> 和 <code>expires</code> 都存在时，<code>cache-control</code> 优先级更高</p> <p>通过max-age属性设置多少秒后过期，不依赖时间对比。</p> <p>但如果cache-control设置了 <code>no-cache</code> 和 <code>no-store</code> 则本地缓存会被忽略，启用协商缓存。</p> <h4 id="协商缓存"><a href="#协商缓存" class="header-anchor">#</a> 协商缓存</h4> <p>会去请求服务器验证资源是否更新，如果没更新使用本地缓存，此时返回的是 304。</p> <p>协商缓存主要包括 <code>last-modified</code> 和 <code>etag</code>。分别用时间和内容做判断标记。</p> <h4 id="last-modified-if-modified-since"><a href="#last-modified-if-modified-since" class="header-anchor">#</a> last-modified &amp; if-Modified-Since</h4> <p>服务器应答时都会通过last-modified来标示修改时间。</p> <p>浏览器下次请求相同资源会将last-modified时间作为if-modified-since字段放在请求报文中用以询问服务器是否该资源过期。</p> <p>服务器需要通过规则判断是否过期</p> <p>过期时直接返回200并在body中放入更新内容</p> <p>如果未过期则直接返回304状态码。</p> <h4 id="etag-if-none-match"><a href="#etag-if-none-match" class="header-anchor">#</a> etag &amp; if-None-Match</h4> <p>服务器将返回内容进行摘要（Hash）</p> <p>服务器应答时都会通过etag来标示内容摘要。</p> <p>浏览器下次请求相同资源会将etag时间作为if-none-match字段放在请求报文中用以询问服务器是否该资源过期。</p> <p>服务器需要通过和服务器内容的摘要进行比对确定是否过期</p> <p>过期时直接返回200并在body中放入更新内容</p> <p>如果未过期则直接返回304状态码。</p> <h3 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h3> <h4 id="http-主要有这些不足"><a href="#http-主要有这些不足" class="header-anchor">#</a> HTTP 主要有这些不足</h4> <p>1.通信使用明文（不加密），内容可能会被窃听</p> <p>2.不验证通信方的身份，因此有可能遭遇伪装</p> <p>3.无法证明报文的完整性，所以有可能已遭篡改</p> <p>HTTPS介绍</p> <p>HTTPS通过和 SSL或 TLS的组合使用， 加密 HTTP 的通信内容。</p> <p>当使用 SSL时，则演变成先和 SSL通信，再由 SSL和 TCP 通信。简言之，所谓 HTTPS，其实就是身披SSL协议这层外壳的 HTTP。</p> <h4 id="证书"><a href="#证书" class="header-anchor">#</a> 证书</h4> <p>证书由值得信任的第三方机构颁发，用以证明服务器和客户端是实际存在的。</p> <p>多数浏览器开发商发布版本时，会事先在内部植入常用认证机关的公开密钥</p> <h4 id="共享密钥加密"><a href="#共享密钥加密" class="header-anchor">#</a> 共享密钥加密</h4> <p>加密和解密同用一个密钥的方式称为共享密钥加密，也被叫做对称密钥加密。</p> <p>以共享密钥方式加密时必须将密钥也发给对方。中间可能被监听。</p> <h4 id="公开密钥加密"><a href="#公开密钥加密" class="header-anchor">#</a> 公开密钥加密</h4> <p>用一对非对称的密钥。一把叫做私有密钥，另一把叫做公开密钥。</p> <p>发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后，再使用自己的私有密钥进行解密。利用这种方式，不需要发送用来解密的私有密钥，也不必担心密钥被攻击者窃听而盗走。</p> <h4 id="https-采用混合加密机制"><a href="#https-采用混合加密机制" class="header-anchor">#</a> <strong>HTTPS</strong> 采用混合加密机制</h4> <p>在交换密钥环节使用公开密钥加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式。</p> <h2 id="websocket"><a href="#websocket" class="header-anchor">#</a> WebSocket</h2> <p>为了实现 WebSocket 通信，需要用到 HTTP 的 Upgrade 首部字段，告知服务器通信协议发生改变，以达到握手的目的。</p> <p>Sec-WebSocket-Key 字段内记录着握手过程中必不可少的键值。</p> <p>Sec-WebSocket-Protocol 字段内记录使用的子协议</p> <p>介绍</p> <p><a href="https://www.jianshu.com/p/bc331bd05dfa" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/bc331bd05dfa<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/通信/2即时通信.html" class="prev">
        即时通信
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.fdf1d93e.js" defer></script><script src="/assets/js/2.07a58c5b.js" defer></script><script src="/assets/js/57.f5a1f1ab.js" defer></script>
  </body>
</html>
